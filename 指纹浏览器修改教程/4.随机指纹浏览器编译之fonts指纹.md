# å¹¿å‘Šä½ï¼š
  [OKKproxxy](https://okkproxy.com/)åŠ¨æ€ä½å®…ä»£ç†IP/æµ·å¤–ç§»åŠ¨IP/é™æ€ä½å®…IPç­‰å‡æœ‰ï¼Œ
  <div style="border: 2px solid #f39c12; padding: 15px; background-color: #fffbe6; border-radius: 10px;">

<details open>
<summary><b>ğŸŒŸ æ¨èä»£ç†ï¼š [OKKproxxy](https://okkproxy.com/)</b></summary>

ğŸ”¥ **OKKproxxy** OKKproxxyæ‹¥æœ‰8000ä¸‡ä¸ªå…¨çƒä½å®…IPï¼Œè¦†ç›–200ä¸ªå›½å®¶

- ğŸš€ **å…æ³¨å†Œä½“éªŒ**ï¼šæ³¨å†Œè”ç³»å®¢æœå‘ŠçŸ¥ä¸ºOKBrowserç”¨æˆ·å³å¯è·èµ 200MåŠ¨æ€æµé‡ã€‚
- ğŸŒ **ä¸šåŠ¡èŒƒå›´**ï¼šåŠ¨æ€ä½å®…ä»£ç†IP/æµ·å¤–ç§»åŠ¨IP/é™æ€ä½å®…IPã€‚
- ğŸ€ **ä»£ç†ç±»å‹**ï¼šæ”¯æŒ HTTP(Sï¼‰SOCKS5 ä»£ç†ã€‚
- ğŸ‰ **é€‚ç”¨ä¸šåŠ¡**ï¼šé€‚ç”¨äºç”µå­å•†åŠ¡ã€ç¤¾äº¤åª’ä½“ã€å¤šå¸æˆ·ã€SEOã€‚
- ğŸ¤ **æˆç«‹æ—¶é—´**ï¼š3å¹´ã€‚

ğŸ”— **è®¿é—®ç½‘ç«™**ï¼š[OKKproxxy](https://okkproxy.com/)

</details>

## æ­£æ–‡
## ä¸€ã€ä»€ä¹ˆæ˜¯å­—ä½“æŒ‡çº¹
Font fingerprintingï¼Œå³å­—ä½“æŒ‡çº¹æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§åœ¨çº¿è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºçš„æ–¹æ³•ã€‚
å½“ä½ è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œç½‘ç«™å¯èƒ½ä¼šä½¿ç”¨JavaScriptç¨‹åºæ¥æ£€æŸ¥ä½ çš„ç³»ç»Ÿä¸­å®‰è£…äº†å“ªäº›å­—ä½“ã€‚
ç”±äºæ¯ä¸ªäººå®‰è£…çš„å­—ä½“å¯èƒ½å› æ“ä½œç³»ç»Ÿçš„ä¸åŒã€ä¸ªäººå–œå¥½æˆ–å·¥ä½œéœ€è¦è€Œæœ‰æ‰€å·®å¼‚ï¼Œå› æ­¤é€šè¿‡æ”¶é›†çš„å­—ä½“åˆ—è¡¨æ•°æ®å¯ä»¥ç”Ÿæˆä¸€ä¸ªç›¸å¯¹ç‹¬ç‰¹çš„â€œæŒ‡çº¹â€ã€‚
## äºŒã€å¦‚ä½•è·å–å­—ä½“æŒ‡çº¹
æœ‰æ”»æ‰æœ‰é˜²ï¼Œå…ˆçœ‹çœ‹ç½‘ç«™æ˜¯å¦‚ä½•é€šè¿‡jsè·å–ä½ çš„fontsæŒ‡çº¹çš„ã€‚
å°†ä¸‹é¢çš„ä»£ç å¤åˆ¶åˆ°F12æ§åˆ¶å°ï¼Œå°±å¯ä»¥è·å–æ˜¾ç¤ºä½ çš„fontsæŒ‡çº¹äº†
```bash
var baseFonts = ['monospace', 'sans-serif', 'serif'];
var testString = "mmmmmmmmmmlli";
var testSize = '72px';

var h = document.getElementsByTagName('body')[0];

// åˆ›å»ºä¸€ä¸ªspanå…ƒç´ ç”¨äºæµ‹è¯•å­—ä½“
var s = document.createElement('span');
s.style.fontSize = testSize;
s.innerHTML = testString;
var defaultWidth = {};
var defaultHeight = {};

// è·å–å¹¶è®°å½•åŸºå‡†å­—ä½“çš„å®½åº¦å’Œé«˜åº¦
for (var index in baseFonts) {
    // è®¾ç½®åŸºå‡†å­—ä½“æ ·å¼
    s.style.fontFamily = baseFonts[index];
    h.appendChild(s);
    defaultWidth[baseFonts[index]] = s.offsetWidth;
    defaultHeight[baseFonts[index]] = s.offsetHeight;
    h.removeChild(s);
}

function detectFont(font) {
    var detected = false;
    for (var i = 0; i < baseFonts.length; i++) {
        s.style.fontFamily = font + ',' + baseFonts[i]; // ä»¥é€—å·åˆ†éš”æ·»åŠ æ½œåœ¨å­—ä½“å’ŒåŸºå‡†å­—ä½“
        h.appendChild(s);
        var matched = (s.offsetWidth != defaultWidth[baseFonts[i]] || s.offsetHeight != defaultHeight[baseFonts[i]]);
        h.removeChild(s);
        detected = detected || matched;
    }
    return detected;
}

async function sha256(message) {
    // æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºUint8Array
    const msgBuffer = new TextEncoder().encode(message);
    // è®¡ç®—æ•£åˆ—å€¼
    const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
    // è½¬æ¢ä¸ºæ•°ç»„
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    // è½¬æ¢ä¸º16è¿›åˆ¶å­—ç¬¦ä¸²
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    return hashHex;
}

var fonts = ["Andale Mono", "Arial", "Arial Black", "Arial Hebrew", "Arial MT", "Arial Narrow", "Arial Rounded MT Bold", "Arial Unicode MS", "Bitstream Vera Sans Mono", "Book Antiqua", "Bookman Old Style", "Calibri", "Cambria", "Cambria Math", "Century", "Century Gothic", "Century Schoolbook", "Comic Sans", "Comic Sans MS", "Consolas", "Courier", "Courier New", "Garamond", "Geneva", "Georgia", "Helvetica", "Helvetica Neue", "Impact", "Lucida Bright", "Lucida Calligraphy", "Lucida Console", "Lucida Fax", "LUCIDA GRANDE", "Lucida Handwriting", "Lucida Sans", "Lucida Sans Typewriter", "Lucida Sans Unicode", "Microsoft Sans Serif", "Monaco", "Monotype Corsiva", "MS Gothic", "MS Outlook", "MS PGothic", "MS Reference Sans Serif", "MS Sans Serif", "MS Serif", "MYRIAD", "MYRIAD PRO", "Palatino", "Palatino Linotype", "Segoe Print", "Segoe Script", "Segoe UI", "Segoe UI Light", "Segoe UI Semibold", "Segoe UI Symbol", "Tahoma", "Times", "Times New Roman", "Times New Roman PS", "Trebuchet MS", "Verdana", "Wingdings", "Wingdings 2", "Wingdings 3"]; /* å¯ç»§ç»­æ·»åŠ éœ€è¦æ¢æµ‹çš„å­—ä½“ */

// æ£€æŸ¥å¹¶è®°å½•æ£€æµ‹åˆ°çš„å­—ä½“
var fontList = {};
for (var i = 0; i < fonts.length; i++) {
    var result = detectFont(fonts[i]);
    fontList[fonts[i]] = result;
}
var sFontList = JSON.stringify(fontList);
// è¾“å‡ºå­—ä½“æŒ‡çº¹ç»“æœ
console.log('sFontList', sFontList);

sha256(sFontList).then(hash => console.log(hash));


```


è¾“å‡ºï¼š
```bash
d3bd8aa98d226562b16984e0d5525047887547379db35f6f7557b4831d212ca5
```

## ä¸‰ã€å­—ä½“æŒ‡çº¹åŸç†
å†™æ®µæ–‡å­—"mmmmmmmmmmlli"ï¼Œå…ˆæµ‹é‡æ ‡å‡†å­—ä½“çš„å®½åº¦ï¼Œæµè§ˆå™¨çš„æ ‡å‡†å­—ä½“æ˜¯['monospace', 'sans-serif', 'serif']ã€‚
å†ä¾æ¬¡æµ‹é‡å­—ä½“åˆ—è¡¨ä¸­çš„æ‰€æœ‰å­—ä½“çš„å®½åº¦ï¼Œå¦‚æœç³»ç»Ÿä¸­æ²¡æœ‰è¿™ä¸ªå­—ä½“ï¼Œå°±ä¼šé»˜è®¤æ˜¾ç¤ºæ ‡å‡†å­—ä½“ã€‚
æ‰€ä»¥å½“å‰å­—ä½“çš„å®½åº¦å’Œæ ‡å‡†å­—ä½“å®½åº¦ç›¸åŒæ—¶ï¼Œå°±ä»£è¡¨ç³»ç»Ÿä¸­æ²¡æœ‰å½“å‰å­—ä½“ã€‚

## å››ã€ç¼–è¯‘éšæœºfontsæŒ‡çº¹
æˆ‘åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« å†™äº†å¦‚ä½•ç¼–è¯‘chromiumçš„å¤§æ¦‚æµç¨‹ï¼Œç½‘ä¸Šçš„æ•™ç¨‹ä¹Ÿä¸€æŠ“ä¸€å¤§æŠŠï¼Œå‡è®¾ä½ å·²ç»ç¼–è¯‘æˆåŠŸäº†ã€‚
æ‰¾åˆ°æºç 
third_party\blink\renderer\core\html\html_element.cc
1.å¤´éƒ¨åŠ ä¸Š(éšä¾¿åŠ åœ¨ä¸€ä¸ª#includeåé¢)
```bash
#include <random>
```

2.æ‰¾åˆ°
```bash
int HTMLElement::offsetWidthForBinding() {
  GetDocument().EnsurePaintLocationDataValidForNode(
      this, DocumentUpdateReason::kJavaScript);
  int result = 0;
  if (const auto* layout_object = GetLayoutBoxModelObject()) {
    result = AdjustedOffsetForZoom(layout_object->OffsetWidth());
    RecordScrollbarSizeForStudy(result, /* is_width= */ true,
                                /* is_offset= */ true);
  }
  return result;
}

DISABLE_CFI_PERF
int HTMLElement::offsetHeightForBinding() {
  GetDocument().EnsurePaintLocationDataValidForNode(
      this, DocumentUpdateReason::kJavaScript);
  int result = 0;
  if (const auto* layout_object = GetLayoutBoxModelObject()) {
    result = AdjustedOffsetForZoom(layout_object->OffsetHeight());
    RecordScrollbarSizeForStudy(result, /* is_width= */ false,
                                /* is_offset= */ true);
  }
  return result;
}

```


2.æ›¿æ¢æ‰åŸæœ‰ä»£ç 
```bash
int getRandomIntForFoo2Modern() {
    static std::mt19937 generator(static_cast<unsigned long>(time(NULL))); // é™æ€ä»¥ç¡®ä¿åªåˆå§‹åŒ–ä¸€æ¬¡
    std::uniform_int_distribution<int> distribution(0, 9);
    int tmp = distribution(generator);
	if (tmp > 0){
		return 0;
	}else{
		return 1;
	}
}

int HTMLElement::offsetWidthForBinding() {
  GetDocument().EnsurePaintLocationDataValidForNode(
      this, DocumentUpdateReason::kJavaScript);
  int result = 0;
  if (const auto* layout_object = GetLayoutBoxModelObject()) {
    result = AdjustedOffsetForZoom(layout_object->OffsetWidth());
    RecordScrollbarSizeForStudy(result, /* is_width= */ true,
                                /* is_offset= */ true);
  }
  result = result + getRandomIntForFoo2Modern();
  return result;
}

DISABLE_CFI_PERF
int HTMLElement::offsetHeightForBinding() {
  GetDocument().EnsurePaintLocationDataValidForNode(
      this, DocumentUpdateReason::kJavaScript);
  int result = 0;
  if (const auto* layout_object = GetLayoutBoxModelObject()) {
    result = AdjustedOffsetForZoom(layout_object->OffsetHeight());
    RecordScrollbarSizeForStudy(result, /* is_width= */ false,
                                /* is_offset= */ true);
  }
  result = result + getRandomIntForFoo2Modern();
  return result;
}
```

åŸç†ï¼šè¿™é‡Œçš„æ“ä½œæ—¶jsæ¯æ¬¡è°ƒç”¨offseWidthå’ŒoffseHeightæ—¶ï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½æœ‰éšæœºå°æ¦‚ç‡ç»™å…¶ç»“æœ+1ï¼Œä½¿ç½‘ç«™å¯¹å­—ä½“æŒ‡çº¹äº§ç”Ÿè¯¯åˆ¤ã€‚

3.ç¼–è¯‘

```bash
ninja  -C  out/Default chrome
```

æ‰¾åˆ°out/Default chromeä¸‹æ–°ç¼–è¯‘çš„æ‰§è¡Œæ–‡ä»¶chrome.exeæ‰§è¡Œ
å†æ¬¡çœ‹çœ‹fontsæŒ‡çº¹ï¼Œæ˜¯ä¸æ˜¯æ¯æ¬¡è®¿é—®éƒ½å˜æˆéšæœºäº†ã€‚
